---
import Layout from "../layouts/Layout.astro";
import Header from "../components/header.astro";
import Productcard from "../components/productcard.astro";

const curl =
  "https://sfmqbipvztwmykdsygxb.supabase.co/rest/v1/products?select=*";
const apikey =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmbXFiaXB2enR3bXlrZHN5Z3hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyNjgzMjcsImV4cCI6MjA1OTg0NDMyN30.0HEP6nkoSRfWQBC-P1LtCYh1a8pwIoZoRvlJd6v6IpM";

const options = {
  headers: { apikey: apikey },
};

const data = await fetch(curl, options).then((response) => response.json());
console.log(data);
---

<Layout>
  <Header />
  {data.map((product) => <Productcard {product} />)}
</Layout>
